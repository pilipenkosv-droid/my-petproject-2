# Журнал изменений

## Февраль 2026

### Hook-Offer для trial пользователей
- Сохранение полных версий документов до обрезки (для trial с документами >30 стр.)
- Разблокировка полных версий после оплаты любого тарифа
- UI предложения "Полная версия уже готова!" на странице результата
- Новые поля БД: `has_full_version` (jobs), `unlock_job_id` (payments)
- Миграции 006, 007

### Улучшения авторизации
- Добавлена функция "Забыли пароль?" на странице логина
- Восстановление пароля через email (Supabase Auth `resetPasswordForEmail`)

### Улучшения профиля пользователя
- Исправлена мобильная вёрстка карточек документов (flex-col → flex-row на desktop)
- Dropdown для скачивания обоих документов (исправленный + с пометками)
- Отображение оставшегося времени хранения документов (24 часа)
- Кнопка "Обработать документ" в профиле

### Улучшения навигации
- Кнопка "Начать" в Header для авторизованных пользователей
- Dropdown с лендингами в навигации (дипломы, курсовые, рефераты, эссе, отчёты)

### Безопасность
- RLS (Row Level Security) для таблицы rate_limits
- Миграция 005

### Улучшения обработки документов
- Обрезка 30 страниц для trial теперь после форматирования (не до)
- Оба документа (исправленный и с пометками) обрезаются одинаково

### Ограничение подписки Pro
- Pro-тариф: 10 обработок/месяц вместо безлимита
- Подписка теперь списывает использования при каждой обработке
- Обновлены UI тарифов и профиля

### Полная документация проекта
- Обновлён README.md до актуального состояния
- Создан docs/ARCHITECTURE.md — архитектура, пайплайн, AI-шлюз, схема БД
- Создан docs/API.md — справочник всех 14+ API-эндпоинтов
- Создан docs/DEPLOYMENT.md — деплой, переменные окружения, Supabase, cron

## Январь 2026

### CDN и производительность
- `62dd544` Статические страницы для Cloudflare CDN кеширования
- Cache headers для статики (_next/static, шрифты)

### SEO-оптимизация
- `03add2c` Meta-теги, ключевые слова, обновление текста лендинга

### UI/UX улучшения
- `b37d4e6` Центрирование кнопок hero и CTA на мобильных
- `76e2313` Карточка бесплатного триала (0 ₽) на странице тарифов
- `27b19cb` Разделение шрифтов: Geologica для заголовков, Inter для основного текста
- `549f90b` Исправление переноса строк в навигации
- `ebfae64` Переход на шрифт Geologica
- `aafd26b` Новый NavigationMenu с glassmorphism-стилем
- `ba6f9a8` Pro-бейдж, кнопка регистрации, скролл к «Как это работает»

### Платёжная система (Lava.top)
- `5479586` Интеграция Lava.top: разовые покупки и подписки
- `cfbbf20` Polling статуса платежа после checkout
- `f1cbf8b` Детальные сообщения об ошибках при создании платежа
- `f7eca45` Fallback для зависших pending-платежей через API Lava.top

### Аутентификация
- `e3b51c0` Email/password + Google OAuth, профиль, анонимный триал
- `aa17588` Восстановление тёмной темы после добавления auth

### AI-шлюз
- `8cdf260` Warmup AI-моделей перед обработкой
- `95ad6fe` Лёгкие HTTP-пинги вместо AI-запросов для warmup
- `5209ae2` Warmup не блокирует модели, обработка non-JSON ошибок
- `9f9bf8c` Удаление несуществующей модели gemini-3-flash

### Хранилище
- `1b00d06` Миграция на Supabase (PostgreSQL + Storage)

### Семантический анализ
- AI-парсер структуры документа (секции, заголовки, библиография)
- Специализированный форматтер библиографии (NBSP, кавычки, тире, нумерация)
- CSAT-виджет для оценки качества

### Человекочитаемые сообщения
- Замена технических терминов на русские формулировки в комментариях Word
- `justify` → `по ширине`, `1.5` → `полуторный`, `pt` → `пт`
